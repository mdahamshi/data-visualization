<html >
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/leaflet.css">
    <link rel="stylesheet" href="css/leaflet-areaselect.css" />
   <script type="text/javascript" src="js/lib/jquery-3.2.1.min.js"></script>
    <link href="css/font.css" rel="stylesheet">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/introjs.css">

    <link rel="stylesheet" href="css/d3.slider.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="js/lib/bootstrap.min.js"></script>

   <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script type="text/javascript" src="js/lib/leaflet.js"></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script type="text/javascript" src="js/lib/d3.min.js"></script>
    <script type="text/javascript" src="js/Globals.js"></script>    
    <script type="text/javascript" src="js/lib/d3.slider.js"></script>
    <script type="text/javascript" src="js/data/worldgeo.js"></script>
    <script type="text/javascript" src="js/lib/leaflet-heat.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/lib/leaflet-areaselect.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <script>

    if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
    || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) isMobile = true;

    if(isMobile){
        $('#allMonths').hide(); //mobile device get slow with many data
        $('#introButton').remove();
        showInfo('Some features are disabled for mobile devices.', 'alert-danger', 2000, 8000);    

    }
    </script>
    <title>Earthquake Data Visualization</title>
</head>
<body >
    <!--<h1>data visualization</h1>-->
        <!--top menu-->
    <nav id="mainNav" data-intro="Hello !, This is a Data Visualization course project, We used d3 and leaflet to view earthquakes data in simple and beautiful way." data-step='1'  class="navbar navbar-inverse myintro navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                    <button id='collapseBtn' type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span> 
                    </button>
                <a class="navbar-brand text-uppercase" href="">Earthquake Data</a>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav ">
                <li class="dropdown">
                        <a class="dropdown-toggle text-uppercase myintro" data-intro="Here you can change the Map layer" data-step="2"   data-toggle="dropdown" href="#">Maps
                        <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#" onclick="changeMapWrap(this,'terrian');">Terrain</a> </li>
                        <li><a href="#" onclick="changeMapWrap(this,'toner');">Toner</a> </li>
                        <li><a href="#" onclick="changeMapWrap(this,'openStreet');">Open Street</a> </li>
                        <li><a href="#" onclick="changeMapWrap(this,'waterColor');">Water Color</a> </li>
                        <li class="default-active active"><a href="#" onclick="changeMapWrap(this,'simple');">Simple (default)</a> </li>
                        <li><a href="#" onclick="changeMapWrap(this,'light');">Light</a> </li>
                        <li><a href="#" onclick="changeMapWrap(this,'sat');">Satellite</a> </li>
                        <li><a href="#" onclick="changeMapWrap(this,'street');">Streets</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                        <a class="dropdown-toggle text-uppercase" data-intro="Here you can use various tools, hover each tool to show info about it." data-step="3" data-toggle="dropdown" href="#">Tools
                        <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                     
                        <li id='toggleLabel' data-toggle="tooltip" title="Toggle locations labels "><a href="#" onclick="simpleToggleLabels();"  >Toggle Labels</a></li>
                        <li data-toggle="tooltip" title="Toggle Countries Layer"><a href="#" onclick="worldLayerToggle();">Toggle Layer</a></li>
                        <li data-toggle="tooltip" title="Toggle light / darak theme. "><a href="#" onclick="toggleThemeWrapper();"  >Toggle Theme</a></li>
                        <li data-toggle="tooltip" title="Toggle Felt / Not Felt Data at the map. "><a href="#" onclick="toggleFelt();"  >Toggle Felt Data</a></li>
                    </ul>
                </li>

                 <li class="dropdown">
                        <a class="dropdown-toggle text-uppercase" data-step="4" data-intro="Here you can choose different Data types (last day, last week..)" data-toggle="dropdown" href="#">Data
                        <span class="caret"></span></a>
                    <ul  class="dropdown-menu">
                        <li class="active default-active" data-toggle="tooltip" title='Display Data from last 24 hours.'><a href="#" onclick="updateCurrentData(pastDay, this);" >Last Day (default)</a>  </li>
                        <li data-toggle="tooltip" title="Display Data from last 7 days."><a href="#" onclick="updateCurrentData(pastSeven, this);" >Past 7 Days</a>  </li>
                        <li id='allMonths' data-toggle="tooltip" title="Display Data from last 30 days."><a href="#" onclick="updateCurrentData(allMonth, this);" >All Month</a>  </li>
                        

                    </ul>
                </li>

                <li class="dropdown">
                    <a class="dropdown-toggle text-uppercase" data-step="5" data-intro="Here you can filter current data by a property." data-toggle="dropdown" href="#">Filter By
                    <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                           <li data-toggle="tooltip" title="Select spesific area, show data only to it. (you can restore all data by clicking reset)"><a href="#" onclick="mapSelectArea();disableMenue();">Select Area</a>  </li>
                        <li data-toggle="tooltip" title="Filter the Data by time range."><a href="#" onclick="filterDivHandler('time')">Time</a>  </li>
                        <li  id='toggleLabel' data-toggle="tooltip" title="Filter the Data by Magnitude range."><a href="#" onclick="filterDivHandler('mag')"  >Magnitude</a></li>
                        <li data-toggle="tooltip" title="Filter the Data by Significance range."><a href="#" onclick="filterDivHandler('sig')">Significance</a></li>
                        <li  id='toggleLabel' data-toggle="tooltip" title="Filter the Data by Depth range. "><a href="#" onclick="filterDivHandler('depth')"  >Depth</a></li>
                    </ul>
                </li>
   
            </ul>
                <ul class="nav navbar-nav navbar-right margin-left-right">
                  <button class="btn btn-primary  myintro navbar-btn" 
                  onclick="animateBtnHandler()" data-toggle="tooltip" 
                  data-intro="This button animate the points according to the time they occured." data-step="7" title="Animate the Map according to the date they happend">Animate</button> 
                 <button class="btn myintro btn-danger navbar-btn" 
                 data-intro="This button reset the map to it's original state (without reloading the data)"
                 data-step="8"
                 onclick="resetMap();" data-toggle="tooltip" title="Reset the map to it's original state without reloading the data">Reset</button>
                
                 <button  onclick="handleRefresh();"class="btn btn-success myintro navbar-btn" data-toggle="tooltip" title="Click to redownload the data"><img src="css/refresh.png" width="20" alt="refresh button"></button>
                 <button id="introButton" onclick="introJs().setOptions({groupClass:'.myintro'}).start();"class="btn btn-info myintro navbar-btn" data-toggle="tooltip" title="Click to show a tour"><img src="css/ques.png" alt="about" width="20"></button>
                  <button class="btn btn-primary  myintro navbar-btn" 
                  onclick="toggleFullScreen()" data-toggle="tooltip"  title="Toggle Full screen mode"><img id="fullScreenImg" src="css/full.png"  width="20" alt="full screen button"></button> 
                </ul>
        </div>
    </nav>
       
        <!--/top menu-->

    <div id="firstPage">
        
        <!--download progress bar-->
        <div id="myProgress"  class="navbar-fixed-top">
            <div id="myBar"></div>
        </div>


    <!-- user input divs -->
    <form id='animateForm'   class="margin-left-right form-inline margin-up-down">
  <div class="form-group">
    <label for="animateTime" >Time (ms) : </label>
    <input type="text" value="500" data-toggle="tooltip" title="Time in ms between each point appearance." class="form-control" id="animateTime">
  </div>
  
  <div class="checkbox">
    <label><input type="checkbox" checked class="margin-left-right" data-toggle="tooltip" title="Uncheck for light theme."><span data-toggle="tooltip" title="Uncheck for light theme.">Dark Theme</span></label>
  </div>
  <button type="button" class="btn btn-default" value="cancel" onclick="$('#animateForm').slideUp();enableMenue();">Cancel</button>
  <button type="button" class="btn btn-default" value="begin" onclick="animateFormHandler();">Begin</button>
    </form>
    <!-- /user input divs -->


    <div id="sideBar" class=" "></div>

    <!-- time axis -->
    <div id='filterDiv' class=" margin-up-down">
         <!-- <svg id='timeSvg'></svg>  -->
         <div id='filterAxis'></div>
         <div  style="text-align: center">
         Min: <span id="filterMin">hh</span>
         <button type="button" class="btn btn-default" value="cancel" onclick="$('#filterDiv').slideUp();enableMenue();">Cancel</button>
         <button type="button" class="btn btn-default" value="begin" onclick="filterDataHandler();">Filter</button>
         Max: <span id="filterMax">ss</span>
         </div>
    </div>

    <!--the map-->
    <div class="map-wrapper no-height leaflet-control-container">
        <div id="mainMap" style="width: inherit; height: inherit; position: relative;">
            <!--<div class="button-wrapper leaflet-bottom leaflet-left">
                <button class="float-btn">Done</button>
            </div>-->
            
        </div>
    </div>

    <span data-intro="You can hover any button to display a tooltip that contain info about it." data-step="20"></span>
    <!--information bar-->
    <div id='success-alert' style="display:none;"class="text-center alert ">
        
    </div>

    <!-- summary table -->
   <table id='sumtable' data-intro="This table shows each property range (kind of summary)" data-step='16' class="table myintro table-condensed text-center height-calc">
    <thead >
      <tr id="infoHead">
        <th ># Earthquakes</th>
        <th>Magnitude Range</th>
        <th>Sig Range</th>
        <th># Felt / Not Felt</th>
        <th>Depth Range</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td id="quakeNum">0</td>
        <td id='magRange'>0</td>
        <td id='sigRange'>0</td>        
        <td id='numFelt'>0</td>        
        <td id='depthRange'>0</td>        
      </tr>
    </tbody>
  </table>
    
    <!-- filter table -->
      <div  class="text-center container">
        <table id='filterTable' style='display:none;' class="table text-center">
            <thead>
                <tr>
                    <th class="col-xs-1">#</th>
                    <th class="col-xs-1">Filter</th>
                    <th class="col-xs-5">From</th>
                    <th class="col-xs-5">To</th>
                </tr>
            </thead>
            <tbody>
                
            </tbody>
        </table>
    </div>
    </div> 
<!-- /firstPage -->
    <div id="secondPage">
        
    </div>
    <!--footer-->
    <footer class="height-calc "  >
        <p>Created by: Mohammad Dahamshi & Mohammad Dabbah</p>
        <p>E-mail: <a href="mailto:Mohammad.Dahamshi@gmail.com">
        Mohammad.Dahamshi@gmail.com</a></p>
        <p>
            About Me <a href="https://about.me/mdahamshi">about.me/mdahamshi</a>
        </p>
    </footer>

    <!--MUST be after the map div !-->
    <script type="text/javascript" src="js/lib/intro.js"></script>
    <script src="js/map.js"></script>
    <script>  </script>
    
</body>
</html>  